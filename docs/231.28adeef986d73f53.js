"use strict";(self.webpackChunkInvestMe=self.webpackChunkInvestMe||[]).push([[231],{5231:(F,g,m)=>{m.r(g),m.d(g,{ExploreProjectsComponent:()=>I});var d=m(6814),x=m(9862),p=m(6223),l=m(8504),a=m(6306),_=m(9397),f=m(3253),t=m(9291),C=m(2058);function P(r,s){if(1&r&&(t.TgZ(0,"div",18),t._UZ(1,"iframe",19),t.ALo(2,"safeUrl"),t.qZA()),2&r){const o=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.s9C("title",o.name),t.Q6J("src",t.lcZ(2,2,e.convertToEmbedUrl(o.videoUrl)),t.uOi)}}function h(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,c=t.oxw();return t.KtG(c.showSupportForm(n.id))}),t._uU(1," \u{1f4b8} Support Financially "),t.qZA()}}function b(r,s){1&r&&(t.TgZ(0,"div")(1,"small",29),t._uU(2,"Amount is required and must be a number greater than 0."),t.qZA()())}function M(r,s){1&r&&(t.TgZ(0,"div")(1,"small",29),t._uU(2,"Contact method is required."),t.qZA()())}function O(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",21)(1,"form",22),t.NdJ("ngSubmit",function(){t.CHM(o);const n=t.oxw().$implicit,c=t.oxw();return t.KtG(c.submitSupport(n.id))}),t.TgZ(2,"label",23),t._uU(3,"Support Amount:"),t.qZA(),t._UZ(4,"input",24),t.YNc(5,b,3,0,"div",14),t.TgZ(6,"label",25),t._uU(7,"Contact Method:"),t.qZA(),t._UZ(8,"input",26),t.YNc(9,M,3,0,"div",14),t.TgZ(10,"button",27),t._uU(11,"Submit Support"),t.qZA(),t.TgZ(12,"button",28),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,c=t.oxw();return t.KtG(c.hideSupportForm(n.id))}),t._uU(13,"Cancel"),t.qZA()()()}if(2&r){const o=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.supportForms[o.id]),t.xp6(4),t.Q6J("ngIf",e.supportForms[o.id].controls.amount.invalid&&(e.supportForms[o.id].controls.amount.touched||e.supportForms[o.id].controls.amount.dirty)),t.xp6(4),t.Q6J("ngIf",e.supportForms[o.id].controls.contactMethod.invalid&&(e.supportForms[o.id].controls.contactMethod.touched||e.supportForms[o.id].controls.contactMethod.dirty)),t.xp6(1),t.Q6J("disabled",e.supportForms[o.id].invalid)}}function j(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",36)(1,"textarea",37),t.NdJ("ngModelChange",function(n){t.CHM(o);const c=t.oxw().$implicit,i=t.oxw(3);return t.KtG(i.replyContent[c.id]=n)}),t.qZA(),t.TgZ(2,"button",38),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,c=t.oxw(3);return t.KtG(c.addReply(n.id))}),t._uU(3,"Post Reply"),t.qZA()()}if(2&r){const o=t.oxw().$implicit,e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.replyContent[o.id])}}function v(r,s){if(1&r&&(t.TgZ(0,"li",41)(1,"strong"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&r){const o=s.$implicit;t.xp6(2),t.hij("",o.userName,":"),t.xp6(1),t.hij(" ",o.content," ")}}function y(r,s){if(1&r&&(t.TgZ(0,"ul",39),t.YNc(1,v,4,2,"li",40),t.qZA()),2&r){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",o.replies)}}function E(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"li",31)(1,"div",32)(2,"strong"),t._uU(3),t.qZA(),t.TgZ(4,"button",33),t.NdJ("click",function(){const c=t.CHM(o).$implicit,i=t.oxw(3);return t.KtG(i.toggleReplyForm(c.id))}),t._uU(5,"Reply"),t.qZA()(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.YNc(8,j,4,1,"div",34),t.YNc(9,y,2,1,"ul",35),t.qZA()}if(2&r){const o=s.$implicit,e=t.oxw(3);t.xp6(3),t.hij("",o.userName,":"),t.xp6(4),t.Oqu(o.content),t.xp6(1),t.Q6J("ngIf",e.replyForms[o.id]),t.xp6(1),t.Q6J("ngIf",o.replies&&o.replies.length)}}function Z(r,s){if(1&r&&(t.TgZ(0,"ul"),t.YNc(1,E,10,4,"li",30),t.qZA()),2&r){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",o.comments)}}function w(r,s){1&r&&(t.TgZ(0,"p"),t._uU(1,"No comments yet."),t.qZA())}function T(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"span",4),t._uU(3),t.qZA(),t.TgZ(4,"button",5),t.NdJ("click",function(){const c=t.CHM(o).$implicit,i=t.oxw();return t.KtG(i.openChat(c.ownerId))}),t._uU(5),t.qZA()(),t.TgZ(6,"div",6)(7,"span"),t._uU(8),t.qZA()(),t.YNc(9,P,3,4,"div",7),t.TgZ(10,"div",8)(11,"h3"),t._uU(12),t.qZA(),t.TgZ(13,"p"),t._uU(14),t.qZA(),t.TgZ(15,"p")(16,"strong"),t._uU(17,"Investment Needed:"),t.qZA(),t._uU(18),t.qZA(),t.TgZ(19,"p")(20,"strong"),t._uU(21,"Number of Investors:"),t.qZA(),t._uU(22),t.qZA(),t.TgZ(23,"p")(24,"strong"),t._uU(25,"Total Interactions:"),t.qZA(),t._uU(26),t.qZA()(),t.TgZ(27,"div",9)(28,"button",5),t.NdJ("click",function(){const c=t.CHM(o).$implicit,i=t.oxw();return t.KtG(i.incrementInteraction(c.id))}),t._uU(29,"\u{1f44d} Like"),t.qZA(),t.TgZ(30,"button",5),t.NdJ("click",function(){const c=t.CHM(o).$implicit,i=t.oxw();return t.KtG(i.decrementInteraction(c.id))}),t._uU(31,"\u{1f44e} Dislike"),t.qZA(),t.YNc(32,h,2,0,"button",10),t.YNc(33,O,14,4,"div",11),t.qZA(),t.TgZ(34,"div",12)(35,"h4"),t._uU(36,"Comments:"),t.qZA(),t.TgZ(37,"div",13),t.YNc(38,Z,2,1,"ul",14),t.YNc(39,w,2,0,"p",14),t.qZA(),t.TgZ(40,"form",15),t.NdJ("ngSubmit",function(){const c=t.CHM(o).$implicit,i=t.oxw();return t.KtG(i.addComment(c.id))}),t._UZ(41,"textarea",16),t.TgZ(42,"button",17),t._uU(43,"Post Comment"),t.qZA()()()()}if(2&r){const o=s.$implicit,e=t.oxw();t.xp6(3),t.Oqu(o.ownerName),t.xp6(2),t.hij(" Chat with ",o.ownerName," "),t.xp6(3),t.hij("Status: ",o.status||"N/A",""),t.xp6(1),t.Q6J("ngIf",o.videoUrl),t.xp6(3),t.Oqu(o.name),t.xp6(2),t.Oqu(o.description),t.xp6(4),t.hij(" $",o.investmentNeeded,""),t.xp6(4),t.hij(" ",o.numberOfInvestors,""),t.xp6(4),t.hij(" ",o.totalInteractions,""),t.xp6(6),t.Q6J("ngIf",e.isInvestor&&!e.supportFormVisible[o.id]),t.xp6(1),t.Q6J("ngIf",e.supportFormVisible[o.id]),t.xp6(5),t.Q6J("ngIf",o.comments&&o.comments.length),t.xp6(1),t.Q6J("ngIf",!o.comments||!o.comments.length),t.xp6(1),t.Q6J("formGroup",e.commentForms[o.id]),t.xp6(2),t.Q6J("disabled",e.commentForms[o.id].invalid)}}let I=(()=>{class r{constructor(o,e,n){this.http=o,this.fb=e,this.router=n,this.projects=[],this.commentForms={},this.replyForms={},this.replyContent={},this.isInvestor=!1,this.supportFormVisible={},this.supportForms={}}ngOnInit(){this.isInvestor="Investor"===localStorage.getItem("userType"),this.getProjects().subscribe(o=>{this.projects=o,this.initializeCommentForms(),this.initializeSupportForms()},o=>console.error("Error fetching projects:",o))}initializeCommentForms(){this.projects.forEach(o=>{this.commentForms[o.id]=this.fb.group({comment:[""]}),o.comments?.forEach(e=>{this.replyForms[e.id]=!1,this.replyContent[e.id]=""})})}initializeSupportForms(){this.projects.forEach(o=>{this.supportForms[o.id]=this.fb.group({amount:[""],contactMethod:[""]}),this.supportFormVisible[o.id]=!1})}getProjects(){return this.http.get("http://investme.runasp.net/api/Projects").pipe((0,a.K)(o=>(console.error("Error fetching projects:",o),(0,l._)(()=>new Error("Failed to fetch projects")))))}openChat(o){const e=+localStorage.getItem("id");this.router.navigate(["/blank/chat"],{queryParams:{receiverId:o,currentUserId:e}})}convertToEmbedUrl(o){const n=this.extractYouTubeVideoId(o);return n?`https://www.youtube.com/embed/${n}`:""}extractYouTubeVideoId(o){const n=o.match(/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([a-zA-Z0-9_-]+)|(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/);return n&&(n[1]||n[2])||null}incrementInteraction(o){const e=localStorage.getItem("id");e&&this.http.post(`http://investme.runasp.net/api/Projects/increment/${o}`,Number(e)).pipe((0,_.b)(()=>this.refreshProjects()),(0,a.K)(n=>(console.error("Error incrementing interaction:",n),(0,l._)(()=>new Error("Failed to increment interaction"))))).subscribe()}decrementInteraction(o){const e=localStorage.getItem("id");e&&this.http.post(`http://investme.runasp.net/api/Projects/decrement/${o}`,Number(e)).pipe((0,_.b)(()=>this.refreshProjects()),(0,a.K)(n=>(console.error("Error decrementing interaction:",n),(0,l._)(()=>new Error("Failed to decrement interaction"))))).subscribe()}addComment(o){const e=this.commentForms[o].get("comment")?.value,n=localStorage.getItem("id"),c=localStorage.getItem("Name");if(e&&n&&c){const i={content:e,createdDate:(new Date).toISOString(),projectId:o,userId:Number(n),userName:c};this.http.post(`http://investme.runasp.net/api/Projects/${o}/comments`,i).pipe((0,_.b)(()=>this.refreshProjects()),(0,a.K)(u=>(console.error("Error adding comment:",u),(0,l._)(()=>new Error("Failed to add comment"))))).subscribe()}else console.warn("Comment content or userId or userName is missing.")}addReply(o){const e=this.replyContent[o],n=localStorage.getItem("id"),c=localStorage.getItem("Name");if(e&&n&&c){const i={content:e,createdDate:(new Date).toISOString(),commentId:o,userId:Number(n),userName:c};this.http.post(`http://investme.runasp.net/api/Projects/comments/${o}/replies`,i).pipe((0,_.b)(()=>this.refreshProjects()),(0,a.K)(u=>(console.error("Error adding reply:",u),(0,l._)(()=>new Error("Failed to add reply"))))).subscribe()}else console.warn("Reply content or userId or userName is missing.")}refreshProjects(){this.getProjects().subscribe(o=>this.projects=o)}toggleReplyForm(o){this.replyForms[o]=!this.replyForms[o]}showSupportForm(o){this.supportFormVisible[o]=!0}hideSupportForm(o){this.supportFormVisible[o]=!1}submitSupport(o){const e=this.supportForms[o].value,n=localStorage.getItem("id");if(n&&e.amount&&e.contactMethod){const c={InvestorId:Number(n),Amount:e.amount,ContactMethod:e.contactMethod};console.log(c),this.http.post(`http://investme.runasp.net/api/Investor/${o}/support`,c).pipe((0,_.b)(()=>this.refreshProjects()),(0,a.K)(i=>(console.error("Error submitting support:",i),(0,l._)(()=>new Error("Failed to submit support"))))).subscribe(()=>{this.hideSupportForm(o),this.supportForms[o].reset()})}else console.warn("Support amount or contact method is missing.")}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(x.eN),t.Y36(p.qu),t.Y36(C.F0))};static#o=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-explore-projects"]],standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[[1,"explore-projects"],["class","project-card",4,"ngFor","ngForOf"],[1,"project-card"],[1,"project-header"],[1,"user-name"],[3,"click"],[1,"project-status"],["class","project-video",4,"ngIf"],[1,"project-details"],[1,"project-interactions"],["class","support-button",3,"click",4,"ngIf"],["class","support-form",4,"ngIf"],[1,"project-comments"],[1,"comments-container"],[4,"ngIf"],[1,"comment-form",3,"formGroup","ngSubmit"],["formControlName","comment","placeholder","Add a comment...","rows","3"],["type","submit",1,"comment-button",3,"disabled"],[1,"project-video"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src","title"],[1,"support-button",3,"click"],[1,"support-form"],[3,"formGroup","ngSubmit"],["for","amount"],["id","amount","formControlName","amount","type","number","min","1","required",""],["for","contactMethod"],["id","contactMethod","formControlName","contactMethod","type","text","required",""],["type","submit",3,"disabled"],["type","button",3,"click"],[1,"error"],["class","comment-item",4,"ngFor","ngForOf"],[1,"comment-item"],[1,"comment-header"],[1,"reply-toggle",3,"click"],["class","reply-form",4,"ngIf"],["class","reply-list",4,"ngIf"],[1,"reply-form"],["placeholder","Add a reply...","rows","3",3,"ngModel","ngModelChange"],[1,"comment-button",3,"click"],[1,"reply-list"],["class","reply-item",4,"ngFor","ngForOf"],[1,"reply-item"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,T,44,15,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.projects))},dependencies:[d.ez,d.sg,d.O5,p.UX,p._Y,p.Fj,p.wV,p.JJ,p.JL,p.Q7,p.qQ,p.sg,p.u,p.u5,p.On,x.JF,f.Q],styles:[".explore-projects[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:20px;background-color:#f5f5f5}.project-card[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:0 auto;border:1px solid #ddd;border-radius:8px;overflow:hidden;box-shadow:0 4px 10px #0000001a;background-color:#fff;padding:20px;transition:box-shadow .3s ease,transform .3s ease;position:relative;animation:_ngcontent-%COMP%_fadeIn .6s ease-in-out}.project-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #0003;transform:scale(1.02)}.project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;border-bottom:2px solid #4a90e2;padding-bottom:10px}.user-name[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#4a90e2}button[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px;color:#fff;background-color:#4a90e2;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease,transform .2s ease;margin-right:10px}button[_ngcontent-%COMP%]:hover{background-color:#2275d7;transform:translateY(-2px)}.project-status[_ngcontent-%COMP%]{margin-bottom:15px;font-size:14px;color:#666;font-style:italic;border-top:1px solid #ddd;padding-top:10px}.project-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:350px;border-radius:8px}.project-details[_ngcontent-%COMP%]{margin-bottom:20px}.project-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333;margin-bottom:10px}.project-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px;color:#555}.project-interactions[_ngcontent-%COMP%]{margin-bottom:20px}.project-interactions[_ngcontent-%COMP%]   .support-button[_ngcontent-%COMP%]{background-color:#ffc107;color:#333}.project-interactions[_ngcontent-%COMP%]   .support-button[_ngcontent-%COMP%]:hover{background-color:#e0a800}.project-interactions[_ngcontent-%COMP%]   .support-form[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:15px;border-radius:8px;box-shadow:0 2px 8px #0000001a}.project-interactions[_ngcontent-%COMP%]   .support-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.project-interactions[_ngcontent-%COMP%]   .support-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700}.project-interactions[_ngcontent-%COMP%]   .support-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px;border:1px solid #ddd;border-radius:4px}.project-interactions[_ngcontent-%COMP%]   .support-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease}.project-interactions[_ngcontent-%COMP%]   .support-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{background-color:#28a745;color:#fff}.project-interactions[_ngcontent-%COMP%]   .support-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{background-color:#dc3545;color:#fff}.project-interactions[_ngcontent-%COMP%]   .support-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.project-comments[_ngcontent-%COMP%]   .comments-container[_ngcontent-%COMP%]{max-height:250px;overflow-y:auto;padding-right:10px}.project-comments[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px;font-weight:600;margin-bottom:15px;color:#333}.project-comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0;margin-bottom:20px}.project-comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:15px;font-size:16px;color:#444;border-bottom:1px solid #ddd;padding-bottom:10px}.project-comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.project-comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .reply-toggle[_ngcontent-%COMP%]{font-size:14px;color:#4a90e2;background:none;border:none;cursor:pointer}.project-comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .reply-toggle[_ngcontent-%COMP%]:hover{text-decoration:underline}.project-comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .reply-form[_ngcontent-%COMP%]{margin-top:10px;padding:10px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 1px 4px #0000001a}.project-comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .reply-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:14px;border:1px solid #ddd;border-radius:4px;margin-bottom:10px}.project-comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .reply-list[_ngcontent-%COMP%]{margin-top:10px;padding-left:20px;font-size:14px;color:#555}.project-comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .reply-list[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]{margin-bottom:8px}.project-comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .reply-list[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#4a90e2}.project-comments[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]{margin-top:20px}.project-comments[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:14px;border:1px solid #ddd;border-radius:8px;margin-bottom:10px}.project-comments[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;color:#fff;background-color:#4a90e2;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.project-comments[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2275d7;transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}"]})}return r})()}}]);