"use strict";(self.webpackChunkInvestMe=self.webpackChunkInvestMe||[]).push([[119],{2119:(C,a,d)=>{d.r(a),d.d(a,{InnovatorProjectsComponent:()=>f});var p=d(6814),m=d(9862),c=d(6223),_=d(3253),t=d(9291),u=d(6593);function v(r,l){if(1&r&&(t.TgZ(0,"div",31)(1,"div",23)(2,"strong"),t._uU(3),t.qZA(),t.TgZ(4,"small",24),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.TgZ(7,"p"),t._uU(8),t.qZA()()),2&r){const o=l.$implicit;t.xp6(3),t.Oqu(o.userName),t.xp6(2),t.Oqu(t.xi3(6,3,o.createdDate,"short")),t.xp6(3),t.Oqu(o.content)}}function g(r,l){if(1&r){const o=t.EpF();t.TgZ(0,"div",27)(1,"form",28),t.NdJ("ngSubmit",function(){t.CHM(o);const n=t.oxw().$implicit,i=t.oxw(3);return t.KtG(i.addReply(n.id))}),t.TgZ(2,"div",16)(3,"input",29),t.NdJ("ngModelChange",function(n){t.CHM(o);const i=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.replyContent[i.id]=n)}),t.qZA(),t.TgZ(4,"button",18),t._uU(5,"Add Reply"),t.qZA()()(),t.YNc(6,v,9,6,"div",30),t.qZA()}if(2&r){const o=t.oxw().$implicit,e=t.oxw(3);t.xp6(3),t.Q6J("ngModel",e.replyContent[o.id]),t.xp6(3),t.Q6J("ngForOf",o.replies)}}function h(r,l){if(1&r){const o=t.EpF();t.TgZ(0,"div",22)(1,"div",23)(2,"strong"),t._uU(3),t.qZA(),t.TgZ(4,"small",24),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"button",25),t.NdJ("click",function(){const i=t.CHM(o).$implicit,s=t.oxw(3);return t.KtG(s.toggleReplyForm(i.id))}),t._uU(10),t.qZA(),t.YNc(11,g,7,2,"div",26),t.qZA()}if(2&r){const o=l.$implicit,e=t.oxw(3);t.xp6(3),t.Oqu(o.userName),t.xp6(2),t.Oqu(t.xi3(6,5,o.createdDate,"short")),t.xp6(3),t.Oqu(o.content),t.xp6(2),t.hij(" ",e.replyForms[o.id]?"Hide Replies":"Show Replies"," "),t.xp6(1),t.Q6J("ngIf",e.replyForms[o.id])}}function b(r,l){if(1&r&&(t.TgZ(0,"div",20),t.YNc(1,h,12,8,"div",21),t.qZA()),2&r){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",o.comments)}}function x(r,l){if(1&r){const o=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"h5",6),t._uU(3),t.TgZ(4,"span",7),t._uU(5),t.qZA()(),t.TgZ(6,"p",8),t._uU(7),t.qZA(),t.TgZ(8,"div",9),t._UZ(9,"iframe",10),t.ALo(10,"safeUrl"),t.qZA(),t.TgZ(11,"div",11)(12,"button",12),t.NdJ("click",function(){const i=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.editProject(i))}),t._uU(13,"Edit"),t.qZA(),t.TgZ(14,"button",13),t.NdJ("click",function(){const i=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.deleteProject(i.id))}),t._uU(15,"Delete"),t.qZA()(),t.TgZ(16,"div",14)(17,"form",15),t.NdJ("ngSubmit",function(){const i=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.addComment(i.id))}),t.TgZ(18,"div",16),t._UZ(19,"input",17),t.TgZ(20,"button",18),t._uU(21,"Add Comment"),t.qZA()()()(),t.YNc(22,b,2,1,"div",19),t.qZA()()}if(2&r){const o=l.$implicit,e=t.oxw();t.xp6(3),t.hij(" ",o.name," "),t.xp6(2),t.Oqu(o.status),t.xp6(2),t.Oqu(o.description),t.xp6(2),t.s9C("title",o.name),t.Q6J("src",t.lcZ(10,7,e.convertToEmbedUrl(o.videoUrl)),t.uOi),t.xp6(8),t.Q6J("formGroup",e.commentForms[o.id]),t.xp6(5),t.Q6J("ngIf",o.comments.length>0)}}let f=(()=>{class r{constructor(o,e,n){this.http=o,this.fb=e,this.sanitizer=n,this.projects=[],this.commentForms={},this.replyForms={},this.replyContent={}}ngOnInit(){this.loadProjects()}loadProjects(){const o=localStorage.getItem("id");this.http.get(`https://localhost:7281/api/projects/${o}`).subscribe(e=>{this.projects=e,this.projects.forEach(n=>{this.commentForms[n.id]=this.fb.group({comment:[""]})})},e=>{console.error("Failed to load projects",e)})}convertToEmbedUrl(o){const n=this.extractYouTubeVideoId(o);return n?`https://www.youtube.com/embed/${n}`:""}extractYouTubeVideoId(o){const n=o.match(/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([a-zA-Z0-9_-]+)|(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/);return n&&(n[1]||n[2])||null}toggleReplyForm(o){this.replyForms[o]=!this.replyForms[o]}addComment(o){const e=this.commentForms[o].get("comment")?.value;e&&this.http.post(`https://localhost:7281/api/comments/${o}`,{content:e}).subscribe(()=>{this.loadProjects()},i=>{console.error("Failed to add comment",i)})}addReply(o){const e=this.replyContent[o];e&&this.http.post(`https://localhost:7281/api/replies/${o}`,{content:e}).subscribe(()=>{this.loadProjects()},i=>{console.error("Failed to add reply",i)})}editProject(o){this.http.put(`https://localhost:7281/api/projects/${o.id}`,{name:o.name,description:o.description,videoUrl:o.videoUrl,topic:o.topic,investmentNeeded:o.investmentNeeded}).subscribe(()=>{this.loadProjects()},n=>{console.error("Failed to update project",n)})}deleteProject(o){this.http.delete(`https://localhost:7281/api/projects/${o}`).subscribe(()=>{this.projects=this.projects.filter(e=>e.id!==o)},e=>{console.error("Failed to delete project",e)})}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(m.eN),t.Y36(c.qu),t.Y36(u.H7))};static#o=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-innovator-projects"]],standalone:!0,features:[t.jDz],decls:4,vars:1,consts:[[1,"container","my-4"],[1,"row"],[1,"col-md-12"],["class","card mb-4 shadow-sm border-light rounded",4,"ngFor","ngForOf"],[1,"card","mb-4","shadow-sm","border-light","rounded"],[1,"card-body"],[1,"card-title","d-flex","justify-content-between","align-items-center"],[1,"badge","bg-secondary"],[1,"card-text"],[1,"video-container","mb-3"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src","title"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"input-group"],["type","text","formControlName","comment","placeholder","Add a comment",1,"form-control"],["type","submit",1,"btn","btn-outline-secondary"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["class","mb-3 border p-3 rounded",4,"ngFor","ngForOf"],[1,"mb-3","border","p-3","rounded"],[1,"d-flex","justify-content-between"],[1,"text-muted"],[1,"btn","btn-link","text-primary",3,"click"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[3,"ngSubmit"],["type","text","placeholder","Add a reply",1,"form-control",3,"ngModel","ngModelChange"],["class","mt-2 border p-2 rounded",4,"ngFor","ngForOf"],[1,"mt-2","border","p-2","rounded"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,x,23,9,"div",3),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("ngForOf",n.projects))},dependencies:[p.ez,p.sg,p.O5,p.uU,c.UX,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.u5,c.On,c.F,m.JF,_.Q],styles:[".card[_ngcontent-%COMP%]{transition:transform .3s,box-shadow .3s}.card[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 4px 10px #0003}.video-container[_ngcontent-%COMP%]{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;background:#000;border-radius:8px}.video-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.input-group[_ngcontent-%COMP%]{margin-top:10px}.btn-link[_ngcontent-%COMP%]{cursor:pointer}.embed-responsive-item[_ngcontent-%COMP%]{border:none}"]})}return r})()}}]);