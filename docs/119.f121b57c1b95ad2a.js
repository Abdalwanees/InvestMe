"use strict";(self.webpackChunkInvestMe=self.webpackChunkInvestMe||[]).push([[119],{2119:(C,a,d)=>{d.r(a),d.d(a,{InnovatorProjectsComponent:()=>f});var m=d(6814),_=d(9862),s=d(6223),l=d(3253),t=d(9291),u=d(6593);function v(r,p){if(1&r&&(t.TgZ(0,"div",31)(1,"div",23)(2,"strong"),t._uU(3),t.qZA(),t.TgZ(4,"small",24),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.TgZ(7,"p"),t._uU(8),t.qZA()()),2&r){const e=p.$implicit;t.xp6(3),t.Oqu(e.userName),t.xp6(2),t.Oqu(t.xi3(6,3,e.createdDate,"short")),t.xp6(3),t.Oqu(e.content)}}function g(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",27)(1,"form",28),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw().$implicit,i=t.oxw(3);return t.KtG(i.addReply(n.id))}),t.TgZ(2,"div",16)(3,"input",29),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw().$implicit,c=t.oxw(3);return t.KtG(c.replyContent[i.id]=n)}),t.qZA(),t.TgZ(4,"button",18),t._uU(5,"Add Reply"),t.qZA()()(),t.YNc(6,v,9,6,"div",30),t.qZA()}if(2&r){const e=t.oxw().$implicit,o=t.oxw(3);t.xp6(3),t.Q6J("ngModel",o.replyContent[e.id]),t.xp6(3),t.Q6J("ngForOf",e.replies)}}function h(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",22)(1,"div",23)(2,"strong"),t._uU(3),t.qZA(),t.TgZ(4,"small",24),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"button",25),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.toggleReplyForm(i.id))}),t._uU(10),t.qZA(),t.YNc(11,g,7,2,"div",26),t.qZA()}if(2&r){const e=p.$implicit,o=t.oxw(3);t.xp6(3),t.Oqu(e.userName),t.xp6(2),t.Oqu(t.xi3(6,5,e.createdDate,"short")),t.xp6(3),t.Oqu(e.content),t.xp6(2),t.hij(" ",o.replyForms[e.id]?"Hide Replies":"Show Replies"," "),t.xp6(1),t.Q6J("ngIf",o.replyForms[e.id])}}function b(r,p){if(1&r&&(t.TgZ(0,"div",20),t.YNc(1,h,12,8,"div",21),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.comments)}}function x(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"h5",6),t._uU(3),t.TgZ(4,"span",7),t._uU(5),t.qZA()(),t.TgZ(6,"p",8),t._uU(7),t.qZA(),t.TgZ(8,"div",9),t._UZ(9,"iframe",10),t.ALo(10,"safeUrl"),t.qZA(),t.TgZ(11,"div",11)(12,"button",12),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.editProject(i))}),t._uU(13,"Edit"),t.qZA(),t.TgZ(14,"button",13),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deleteProject(i.id))}),t._uU(15,"Delete"),t.qZA()(),t.TgZ(16,"div",14)(17,"form",15),t.NdJ("ngSubmit",function(){const i=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.addComment(i.id))}),t.TgZ(18,"div",16),t._UZ(19,"input",17),t.TgZ(20,"button",18),t._uU(21,"Add Comment"),t.qZA()()()(),t.YNc(22,b,2,1,"div",19),t.qZA()()}if(2&r){const e=p.$implicit,o=t.oxw();t.xp6(3),t.hij(" ",e.name," "),t.xp6(2),t.Oqu(e.status),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.s9C("title",e.name),t.Q6J("src",t.lcZ(10,7,o.convertToEmbedUrl(e.videoUrl)),t.uOi),t.xp6(8),t.Q6J("formGroup",o.commentForms[e.id]),t.xp6(5),t.Q6J("ngIf",e.comments.length>0)}}let f=(()=>{class r{constructor(e,o,n){this.http=e,this.fb=o,this.sanitizer=n,this.projects=[],this.commentForms={},this.replyForms={},this.replyContent={}}ngOnInit(){this.loadProjects()}loadProjects(){const e=localStorage.getItem("id");this.http.get(`http://investme.runasp.net/api/projects/${e}`).subscribe(o=>{this.projects=o,this.projects.forEach(n=>{this.commentForms[n.id]=this.fb.group({comment:[""]})})},o=>{console.error("Failed to load projects",o)})}convertToEmbedUrl(e){const n=this.extractYouTubeVideoId(e);return n?`https://www.youtube.com/embed/${n}`:""}extractYouTubeVideoId(e){const n=e.match(/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([a-zA-Z0-9_-]+)|(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/);return n&&(n[1]||n[2])||null}toggleReplyForm(e){this.replyForms[e]=!this.replyForms[e]}addComment(e){const o=this.commentForms[e].get("comment")?.value;o&&this.http.post(`http://investme.runasp.net/api/comments/${e}`,{content:o}).subscribe(()=>{this.loadProjects()},i=>{console.error("Failed to add comment",i)})}addReply(e){const o=this.replyContent[e];o&&this.http.post(`http://investme.runasp.net/api/replies/${e}`,{content:o}).subscribe(()=>{this.loadProjects()},i=>{console.error("Failed to add reply",i)})}editProject(e){this.http.put(`http://investme.runasp.net/api/projects/${e.id}`,{name:e.name,description:e.description,videoUrl:e.videoUrl,topic:e.topic,investmentNeeded:e.investmentNeeded}).subscribe(()=>{this.loadProjects()},n=>{console.error("Failed to update project",n)})}deleteProject(e){this.http.delete(`http://investme.runasp.net/api/projects/${e}`).subscribe(()=>{this.projects=this.projects.filter(o=>o.id!==e)},o=>{console.error("Failed to delete project",o)})}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(_.eN),t.Y36(s.qu),t.Y36(u.H7))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-innovator-projects"]],standalone:!0,features:[t.jDz],decls:4,vars:1,consts:[[1,"container","my-4"],[1,"row"],[1,"col-md-12"],["class","card mb-4 shadow-sm border-light rounded",4,"ngFor","ngForOf"],[1,"card","mb-4","shadow-sm","border-light","rounded"],[1,"card-body"],[1,"card-title","d-flex","justify-content-between","align-items-center"],[1,"badge","bg-secondary"],[1,"card-text"],[1,"video-container","mb-3"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src","title"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"input-group"],["type","text","formControlName","comment","placeholder","Add a comment",1,"form-control"],["type","submit",1,"btn","btn-outline-secondary"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["class","mb-3 border p-3 rounded",4,"ngFor","ngForOf"],[1,"mb-3","border","p-3","rounded"],[1,"d-flex","justify-content-between"],[1,"text-muted"],[1,"btn","btn-link","text-primary",3,"click"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[3,"ngSubmit"],["type","text","placeholder","Add a reply",1,"form-control",3,"ngModel","ngModelChange"],["class","mt-2 border p-2 rounded",4,"ngFor","ngForOf"],[1,"mt-2","border","p-2","rounded"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,x,23,9,"div",3),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("ngForOf",n.projects))},dependencies:[m.ez,m.sg,m.O5,m.uU,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.u5,s.On,s.F,_.JF,l.Q],styles:[".card[_ngcontent-%COMP%]{transition:transform .3s,box-shadow .3s}.card[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 4px 10px #0003}.video-container[_ngcontent-%COMP%]{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;background:#000;border-radius:8px}.video-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.input-group[_ngcontent-%COMP%]{margin-top:10px}.btn-link[_ngcontent-%COMP%]{cursor:pointer}.embed-responsive-item[_ngcontent-%COMP%]{border:none}"]})}return r})()}}]);