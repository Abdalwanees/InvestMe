"use strict";(self.webpackChunkInvestMe=self.webpackChunkInvestMe||[]).push([[264],{6264:(M,l,o)=>{o.r(l),o.d(l,{ChatComponent:()=>f});var e=o(9291),r=o(6814),i=o(6223),p=o(9862),d=o(9397);const u=function(n,g){return{sent:n,received:g}};function _(n,g){if(1&n&&(e.TgZ(0,"div",7)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"small"),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&n){const s=g.$implicit,t=e.oxw(2);e.Q6J("ngClass",e.WLB(6,u,s.senderId===t.currentUserId,s.senderId!==t.currentUserId)),e.xp6(2),e.Oqu(s.content),e.xp6(2),e.Oqu(e.xi3(5,3,s.sentAt,"short"))}}function m(n,g){if(1&n&&(e.ynx(0),e.TgZ(1,"div",5),e.YNc(2,_,6,9,"div",6),e.qZA(),e.BQk()),2&n){const s=e.oxw();e.xp6(2),e.Q6J("ngForOf",s.messages)}}function h(n,g){1&n&&(e.TgZ(0,"p"),e._uU(1,"No messages yet. Start the conversation!"),e.qZA())}let f=(()=>{class n{constructor(){this.http=(0,e.f3M)(p.eN),this.messages=[],this.newMessage="",this.currentUserId=+localStorage.getItem("id")}ngOnInit(){this.receiverId?this.fetchMessages():console.error("Receiver ID is not defined")}fetchMessages(){this.http.get(`https://localhost:7281/api/messages/user/${this.receiverId}`).subscribe(s=>this.messages=s,s=>console.error("Error fetching messages:",s))}sendMessage(){this.newMessage.trim()&&this.http.post("https://localhost:7281/api/messages",{content:this.newMessage,receiverId:this.receiverId}).pipe((0,d.b)(t=>this.messages.push(t))).subscribe(()=>this.newMessage="",t=>console.error("Error sending message:",t))}static#e=this.\u0275fac=function(t){return new(t||n)};static#n=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],inputs:{receiverId:"receiverId"},standalone:!0,features:[e.jDz],decls:7,vars:3,consts:[[4,"ngIf","ngIfElse"],["noMessages",""],[1,"message-input"],["placeholder","Type your message...",3,"ngModel","ngModelChange","keyup.enter"],[3,"click"],[1,"messages"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],[1,"message",3,"ngClass"]],template:function(t,a){if(1&t&&(e.YNc(0,m,3,1,"ng-container",0),e.YNc(1,h,2,0,"ng-template",null,1,e.W1O),e.TgZ(3,"div",2)(4,"input",3),e.NdJ("ngModelChange",function(C){return a.newMessage=C})("keyup.enter",function(){return a.sendMessage()}),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return a.sendMessage()}),e._uU(6,"Send"),e.qZA()()),2&t){const c=e.MAs(2);e.Q6J("ngIf",a.messages&&a.messages.length>0)("ngIfElse",c),e.xp6(4),e.Q6J("ngModel",a.newMessage)}},dependencies:[r.ez,r.mk,r.sg,r.O5,r.uU,i.u5,i.Fj,i.JJ,i.On],styles:[".messages[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;padding:10px;background-color:#f5f5f5}.message[_ngcontent-%COMP%]{margin-bottom:15px;padding:10px;border-radius:10px;max-width:70%}.message.sent[_ngcontent-%COMP%]{background-color:#dcf8c6;align-self:flex-end}.message.received[_ngcontent-%COMP%]{background-color:#fff;align-self:flex-start}.message-input[_ngcontent-%COMP%]{display:flex;margin-top:15px}.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:10px;border-radius:20px;border:1px solid #ccc}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;padding:10px 15px;border:none;background-color:#28a745;color:#fff;border-radius:20px}"]})}return n})()}}]);